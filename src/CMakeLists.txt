add_library(packetatorLib PcapReplayNetworkStack/Internet/IPv6/ipv6.cpp PcapReplayNetworkStack/Internet/ip.cpp TCPIPNetworkStack/Transport/UDP/udp_flow.cpp PcapReplayNetworkStack/Transport/utils.cpp utils.cpp TCPIPNetworkStack/host.cpp TCPIPNetworkStack/Link/network_device.cpp TCPIPNetworkStack/Link/networking.cpp TCPIPNetworkStack/network_stack.cpp TCPIPNetworkStack/Internet/IP/arp.cpp TCPIPNetworkStack/Internet/IP/ipv4.cpp TCPIPNetworkStack/Internet/IP/icmp.cpp TCPIPNetworkStack/Internet/neighbor_table.cpp TCPIPNetworkStack/Internet/route_table.cpp TCPIPNetworkStack/tcp_ip_network_stack.cpp PcapReplayNetworkStack/pcap_replay_network_stack.cpp PcapReplayNetworkStack/Internet/IP/ipv4.cpp PcapReplayNetworkStack/pcap_replay_network_stack_config.cpp PcapReplayNetworkStack/Transport/TCP/tcp.cpp PcapReplayNetworkStack/Internet/IP/arp.cpp TCPIPNetworkStack/Transport/TCP/tcp.cpp PcapReplayNetworkStack/Link/pcap.cpp PcapReplayNetworkStack/validator.cpp TCPIPNetworkStack/Transport/TCP/tcp_reassembler.cpp TCPIPNetworkStack/Transport/TCP/tins_tcp_reassembler.cpp PcapReplayNetworkStack/utils.cpp TCPIPNetworkStack/Application/application_classifier.cpp TCPIPNetworkStack/Application/dynamic_application.cpp TCPIPNetworkStack/Application/application.cpp TCPIPNetworkStack/Application/http_application.cpp PcapReplayNetworkStack/Validation/application.cpp PcapReplayNetworkStack/Validation/http.cpp PcapReplayNetworkStack/Validation/tcp.cpp TCPIPNetworkStack/Internet/IPv6/ipv6.cpp TCPIPNetworkStack/Internet/IPv6/icmpv6.cpp TCPIPNetworkStack/Internet/ip_output.cpp TCPIPNetworkStack/Internet/IPv6/ndp.cpp TCPIPNetworkStack/Transport/connection.cpp TCPIPNetworkStack/Transport/connection_table.cpp TCPIPNetworkStack/Transport/TCP/tcp_connection.cpp TCPIPNetworkStack/Transport/TCP/tcp_flow.cpp TCPIPNetworkStack/Transport/utils.cpp TCPIPNetworkStack/Internet/utils.cpp TCPIPNetworkStack/Transport/UDP/udp_connection.cpp TCPIPNetworkStack/Transport/UDP/udp.cpp PcapReplayNetworkStack/Transport/UDP/udp.cpp PcapReplayNetworkStack/Transport/transport.cpp PcapReplayNetworkStack/Validation/transport.cpp PcapReplayNetworkStack/Validation/udp.cpp PcapReplayNetworkStack/Validation/ip.cpp PcapReplayNetworkStack/Validation/ipv4.cpp PcapReplayNetworkStack/Validation/ipv6.cpp ../include/TCPIPNetworkStack/Application/dns_application.h TCPIPNetworkStack/Application/dns_application.cpp PcapReplayNetworkStack/Validation/dns.cpp PcapReplayNetworkStack/Application/application.cpp ../include/TCPIPNetworkStack/Internet/defragmenter.h ../include/TCPIPNetworkStack/Internet/IP/IPv4Defragmenter.h TCPIPNetworkStack/Internet/IP/IPv4Defragmenter.cpp TCPIPNetworkStack/Internet/defragmenter.cpp ../include/TCPIPNetworkStack/Internet/IPv6/IPv6Defragmenter.h TCPIPNetworkStack/Internet/IPv6/IPv6Defragmenter.cpp PcapReplayNetworkStack/Internet/IPv6/ndp.cpp TCPIPNetworkStack/Link/output.cpp ../include/TCPIPNetworkStack/Application/ftp_application.h TCPIPNetworkStack/Application/ftp_application.cpp PcapReplayNetworkStack/Validation/ftp.cpp PcapReplayNetworkStack/Application/ftp.cpp PcapReplayNetworkStack/Application/dns.cpp ../include/SynchronizedQueue.h)

IF(PACKETATOR_BUILD_TESTS)
    add_library(packetatorLibUnitTest PcapReplayNetworkStack/Validation/ip.cpp PcapReplayNetworkStack/Internet/IPv6/ipv6.cpp PcapReplayNetworkStack/Internet/ip.cpp TCPIPNetworkStack/Transport/UDP/udp_flow.cpp PcapReplayNetworkStack/Transport/utils.cpp utils.cpp TCPIPNetworkStack/host.cpp TCPIPNetworkStack/Link/network_device.cpp TCPIPNetworkStack/Link/networking.cpp TCPIPNetworkStack/network_stack.cpp TCPIPNetworkStack/Internet/IP/arp.cpp TCPIPNetworkStack/Internet/IP/ipv4.cpp TCPIPNetworkStack/Internet/IP/icmp.cpp TCPIPNetworkStack/Internet/neighbor_table.cpp TCPIPNetworkStack/Internet/route_table.cpp TCPIPNetworkStack/tcp_ip_network_stack.cpp PcapReplayNetworkStack/pcap_replay_network_stack.cpp PcapReplayNetworkStack/Internet/IP/ipv4.cpp PcapReplayNetworkStack/pcap_replay_network_stack_config.cpp PcapReplayNetworkStack/Transport/TCP/tcp.cpp PcapReplayNetworkStack/Internet/IP/arp.cpp TCPIPNetworkStack/Transport/TCP/tcp.cpp PcapReplayNetworkStack/Link/pcap.cpp PcapReplayNetworkStack/validator.cpp TCPIPNetworkStack/Transport/TCP/tcp_reassembler.cpp TCPIPNetworkStack/Transport/TCP/tins_tcp_reassembler.cpp PcapReplayNetworkStack/utils.cpp TCPIPNetworkStack/Application/application_classifier.cpp TCPIPNetworkStack/Application/dynamic_application.cpp TCPIPNetworkStack/Application/application.cpp TCPIPNetworkStack/Application/http_application.cpp PcapReplayNetworkStack/Validation/application.cpp PcapReplayNetworkStack/Validation/http.cpp PcapReplayNetworkStack/Validation/tcp.cpp TCPIPNetworkStack/Internet/IPv6/ipv6.cpp TCPIPNetworkStack/Internet/IPv6/icmpv6.cpp TCPIPNetworkStack/Internet/ip_output.cpp TCPIPNetworkStack/Internet/IPv6/ndp.cpp TCPIPNetworkStack/Transport/connection.cpp TCPIPNetworkStack/Transport/connection_table.cpp TCPIPNetworkStack/Transport/TCP/tcp_connection.cpp TCPIPNetworkStack/Transport/TCP/tcp_flow.cpp TCPIPNetworkStack/Transport/utils.cpp TCPIPNetworkStack/Internet/utils.cpp TCPIPNetworkStack/Transport/UDP/udp_connection.cpp TCPIPNetworkStack/Transport/UDP/udp.cpp PcapReplayNetworkStack/Transport/UDP/udp.cpp PcapReplayNetworkStack/Transport/transport.cpp PcapReplayNetworkStack/Validation/transport.cpp PcapReplayNetworkStack/Validation/udp.cpp PcapReplayNetworkStack/Validation/ipv4.cpp PcapReplayNetworkStack/Validation/ipv6.cpp ../include/TCPIPNetworkStack/Application/dns_application.h TCPIPNetworkStack/Application/dns_application.cpp PcapReplayNetworkStack/Validation/dns.cpp PcapReplayNetworkStack/Application/application.cpp ../include/TCPIPNetworkStack/Internet/defragmenter.h ../include/TCPIPNetworkStack/Internet/IP/IPv4Defragmenter.h TCPIPNetworkStack/Internet/IP/IPv4Defragmenter.cpp TCPIPNetworkStack/Internet/defragmenter.cpp ../include/TCPIPNetworkStack/Internet/IPv6/IPv6Defragmenter.h TCPIPNetworkStack/Internet/IPv6/IPv6Defragmenter.cpp PcapReplayNetworkStack/Internet/IPv6/ndp.cpp TCPIPNetworkStack/Link/output.cpp ../include/TCPIPNetworkStack/Application/ftp_application.h TCPIPNetworkStack/Application/ftp_application.cpp PcapReplayNetworkStack/Validation/ftp.cpp PcapReplayNetworkStack/Application/ftp.cpp PcapReplayNetworkStack/Application/dns.cpp ../include/SynchronizedQueue.h)
    target_compile_definitions(packetatorLibUnitTest PRIVATE UNIT_TESTING=1)
ENDIF()

add_executable(packetator main.cpp)
target_link_libraries(packetator pthread)
target_link_libraries(packetator packetatorLib)
target_link_libraries(packetator CustomHTTParserLib)
target_link_libraries(packetator CustomFTParserLib)
target_link_libraries(packetator yaml-cpp)
target_link_libraries(packetator tins)

